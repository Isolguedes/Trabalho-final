<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Assistente Escolar</title>

<style>
body {
    margin: 0;
    padding: 0;
    background: #f4eaff;
    font-family: Arial;
}

#chatbox {
    height: 100vh;
    padding: 20px;
    display: flex;
    flex-direction: column;
}

#msgs {
    flex: 1;
    overflow-y: auto;
    padding: 10px;
}

.msg {
    padding: 10px;
    margin-bottom: 12px;
    border-radius: 10px;
    max-width: 80%;
}

.user {
    background: #b388ff;
    color: white;
    align-self: flex-end;
}

.bot {
    background: #d8c3ff;
    color: #2a003f;
    align-self: flex-start;
}

#inputArea {
    display: flex;
    gap: 10px;
}

input {
    flex: 1;
    padding: 10px;
    border-radius: 8px;
}

button {
    background: #9c6bff;
    border: none;
    padding: 10px 15px;
    border-radius: 8px;
    color: white;
    cursor: pointer;
}
</style>
</head>

<body>

<div id="chatbox">
    <div id="msgs"></div>

    <div id="inputArea">
        <input id="texto" placeholder="Digite sua mensagem...">
        <button onclick="enviar()">Enviar</button>
    </div>
</div>

<script>


function addMsg(txt, tipo) {
    const box = document.getElementById("msgs");
    const div = document.createElement("div");
    div.className = "msg " + tipo;
    div.innerText = txt;
    box.appendChild(div);
    box.scrollTop = box.scrollHeight;
}

async function enviar() {
    const campo = document.getElementById("texto");
    const msg = campo.value.trim();
    if (!msg) return;

    addMsg(msg, "user");
    campo.value = "";

    const resposta = await consulta(msg);
    addMsg(resposta, "bot");
}

async function consulta(pergunta) {
    try {
        const r = await fetch("http://localhost:3000/chat", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ message: pergunta })
        });

        const data = await r.json();
        return data.reply;

    } catch {
        return "Erro ao conectar com o servidor.";
    }
}
</script>

</body>
</html>